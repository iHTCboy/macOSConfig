title: 苹果 iOS 分发和安装 App 的那些趣事
date: 2023-12-12 23:59:23
categories: technology #induction life poetry
tags: [App Store,iOS分发,iOS企业证书,iOS超级签名,iOS开发者账号,苹果侧载]  # <!--more-->
reward: true

---

> 本文首发于 [苹果 iOS 分发和安装 App 的那些趣事 - 掘金](https://juejin.cn/post/7315260397371490319)，欢迎关注我们 [@37手游移动客户端团队](https://juejin.cn/user/1002387318511214) 。

作者：iHTCboy

> 本文介绍了苹果iOS应用分发和安装的一些有趣的事。讨论了不同的开发者计划和分发方式，包括企业签名、超级签名、TestFlight签名和MDM超级签名。还提到了开发者模式、企业账号、设备注册限制以及自定App和非公开App分发的解决方案。最后，讨论了欧盟的《数字市场法》对苹果的影响和可能改变苹果软件生态的可能性。

<!--more-->

![2023-iOS-Distribution-App-00](https://ihtcboy.com/images/2023-iOS-Distribution-App-00.png)

### 一、前言

2007 年第一代 iPhoneOS 并不支持给 iPhone 开发原生应用，当时苹果主推 Web Apps，然而，一些技术爱好者探索越狱（Jailbreak）iPhone 的方法，这意味着可以拿到操作系统的管理员权限，从而能够安装第三方应用程序。越狱使得 iPhone 用户能够访问非官方应用商店，以及自定义铃声、壁纸和其他功能。

2008 年 3 月 6 日，苹果 CEO 史蒂夫·乔布斯 公布了 [iPhone 软件路线图](https://podcasts.apple.com/us/podcast/apple-march-6-event-iphone-software-roadmap/id275834665)，正式宣布推出 App Store 应用商店！

![2023-iOS-Distribution-App-01](https://ihtcboy.com/images/2023-iOS-Distribution-App-01.png)
> 图片来自 [web.archive.org](https://web.archive.org/web/20080306232659/http://www.apple.com/)

乔布斯说：“我们很高兴创建一个充满活力的第三方开发人员社区，该社区可以为 iPhone 和 iPod touch 提供数千个原生应用程序。iPhone 的企业功能与其革命性的多点触控用户界面和先进的软件架构相结合，为移动设备提供了有史以来最好的用户体验和有史以来最先进的软件平台。”

至此，开启了苹果至今 15 年的 App Store 商业帝国的征程，iPhone Software Roadmap 奠定了苹果开发者的第三个方向：

* Mac Dev Center
* Web Apps Dev Center
* **iPhone Dev Center**

> 注：本文不会讲解苹果在 iPhone 上如何限制安装 App 的技术原理，网上已经有很多文章，大家可以自行搜索。只会讲解苹果分发 App 方式的演变过程，让所有小白都能快速知道！

### 二、初窥门径

#### 2.1 iPhone Enterprise Beta Program（iPhone 企业测试版计划）

iPhone 软件路线图发布会后，苹果开放了 iPhone 企业测试版计划，并不是所有开发者都能符合要求，在测试期间提供给数量有限的开发者。需要申请此计划有 5 个要求：

- 由不超过 5 人组成的团队来测试 iPhone 2.0 软件测试版
- 1名拥有IT基础设施管理权限的团队成员
- 1名指定的技术负责人，作为与苹果的主要联系人
- 所有团队成员都阅读并接受苹果客户种子和保密协议的条款
- 使用 Mac OS X Leopard v10.5.2 或更高版本的 Mac 电脑
- 最多 5 台专用于软件测试的 iPhone，分配给各个团队成员

![2023-iOS-Distribution-App-02](https://ihtcboy.com/images/2023-iOS-Distribution-App-02.png)
> 图片来自 [web.archive.org](https://web.archive.org/web/20080309203806/http://www.apple.com/iphone/enterprise/apply/)

此外，只有美国的公司有资格申请，当时的申请表，罗列了一系统详细的问卷，如贵公司从事的行业？使用哪些运营商网络？贵公司支持哪些邮件服务器？贵公司支持哪些协议的 VPN？

所以，最开始只允许 5 台真机安装测试 App。


#### 2.2 iPhone Developer Program（iPhone 开发者计划）

> The iPhone Developer Program provides a complete and integrated process for developing, debugging, and distributing your free, commercial, or in-house applications for iPhone and iPod touch. Complete with development resources, real-world testing on iPhone, and distribution on the App Store, you have everything you need to go from code to customer.
>  
> iPhone 开发者计划提供了一个完整的集成流程，用于开发、调试和分发 iPhone 和 iPod touch 的免费、商业或内部应用程序。凭借开发资源、iPhone 上的实际测试以及 App Store 上的分发，您拥有从代码到客户所需的一切。

iPhone 开发者计划提供 2 个计划方案：

- **Standard Program（标准计划）$99** ：适用于为 iPhone 和 iPod touch 创建免费和商业应用程序，并希望在App Store上分发应用程序的开发者。
- **Enterprise Program（企业计划）$299**：适用于拥有 500 名或更多员工，并为 iPhone 和 iPod touch 创建专有内部应用程序的公司。

![2023-iOS-Distribution-App-03](https://ihtcboy.com/images/2023-iOS-Distribution-App-03.png)
> 图片来自 [web.archive.org](https://web.archive.org/web/20081204105516/http://developer.apple.com/iphone/program/apply.html)

2 个计划方案的区别：

|  | 标准计划 | 企业计划 |
|---|---|---|
| 年费 | $99 | $299 |
| 申请要求 | - | 500+员工 |
| iPhone SDK | ✔️ | ✔️ |
| iPhone 开发者资源 | ✔️ |  ✔️|
| iPhone 和 iPoad touch 真机测试 | ✔️ | ✔️ |
| 代码级技术支持 | ✔️ | ✔️ |
| 苹果开发者论坛 | ✔️ |  ✔️|
| App Store 分发 | ✔️ | ✖️ |
| Ad Hoc（临时）分发 | ✔️ | ✔️ |
| In-house（内部）分发 | ✖️ | ✔️ |
| iPhone 和 iPoad touch 真机测试 | 各100台 | - |

这里的 Standard Program（标准计划）就是现在咱们说的开发者（个人或公司），Enterprise Program（企业计划）是企业开发者，他们的区别，从上面能直观看出来，标准计划是用于上架 App Store，而企业计划目的是给企业内部分发 App 使用。

所以，从一开始，苹果就已经明确开发者 iPhone 和 iPoad touch 真机测试只能使用最多各 100 台安装测试的 App。而企业计划不限制 App 分发的设备数，可安装在任意设备上。当然 App Store 也不限制 App 下载的设备。

这里一定很多人会问，大家怎么这么傻：用 Enterprise Program（企业计划）就不用给苹果交 30% 分成了？其实，苹果应用内购买当时还没有提出，并且后来 App Store 非常成功，对于开发者不需要自己进行推广，在当时是非常省心省力的，苹果内购的历史可查看之前的文章《[关于 App Store 苹果商店价格的那些事](https://juejin.cn/post/7205562168358895671)》。


#### 2.3 iPhone Developer University Program（iPhone 开发者大学计划）
> The iPhone Developer University Program is a free program designed for higher education institutions looking to introduce curriculum for developing iPhone or iPod touch applications. The University Program provides a wealth of development resources, sophisticated tools for testing and debugging, and the ability to share applications within the same development team. Institutions can also submit applications for distribution in the App Store.
> 
> iPhone 开发者大学计划是一个免费计划，专为希望引入开发 iPhone 或 iPod touch 应用程序的课程的高等教育机构设计。大学计划提供了丰富的开发资源，复杂的测试和调试工具，以及在同一开发团队中共享应用程序的能力。机构也可以在 App Store 中提交分发申请。

![2023-iOS-Distribution-App-04](https://ihtcboy.com/images/2023-iOS-Distribution-App-04.png)
> 图片来自 [web.archive.org](https://web.archive.org/web/20081207013650/http://developer.apple.com/iphone/program/university.html)

iPhone 开发者大学计划有什么不同？其中可以理解为是免费版的 Standard Program（标准计划），不需要年费！所以能安装和分发的设备数，是一样的。（注：现在的开发者大学计划分发规则已经更改，详见下文介绍。）

这里也可以看出来，苹果对于吸引大学生的计划，从一开始就已经意识到，大学生的创造力是无限的！

**综上，iPhoneOS 2 苹果允许分发和安装 App 的方法：**

*  App Store：苹果商店是唯一官方商店，人工审核通过的 App 才能上架销售
*  Ad Hoc（临时）：允许 iPhone 和 iPoad touch 各 100 台真机用于开发者内部测试
*  In-house（内部）：允许企业计划账号内部分发，安装和设备的无限制


### 三、渐入佳境

#### 3.1 iPhone Developer vs iOS Developer

2010 年 6 月 7 日的 WWDC2010 乔布斯宣布，将原来 `iPhone OS` 系统重新定名为 `iOS`，并发布新一代操作系统：“iOS 4”。

所以，正式开启 iOS 时代：`iOS Developer Program`！

#### 3.2 TestFlight

2014 年 7 月 22 日，苹果在 App Store 上架了一款 [TestFlight App](https://apps.apple.com/us/app/testflight/id899247664) ，允许 1000 名测试人员安装 App。

TestFlight 是 Burstly 公司推出的在线安装和测试移动应用的平台，最初支持对 Android 和 iOS 应用程序进行测试，苹果于 2014 年 2 月收购了 Burstly，并在 2014 年 3 月撤销了对 Android 的支持。

最开始 TestFlight 大家并没有使用，一方面安装只有 90 天的有效期，到期后 App 就打不开，并且开发者更新新版本，另一方面最开始只支持 1000 名测试人员。后来，2016 年，增加到 2000 名测试人员额度，2017 年增加到 10000 名，以支持更大规模的 Beta 测试。

现在，TestFlight 可让你轻松测试 iOS、iPadOS、macOS、Apple tvOS、watchOS 和 iMessage 信息 App 的 Beta 版本以及轻 App，并在开发者将 App 发布到 App Store 前为他们提供有价值的反馈。开发者会通过电子邮件或公开链接邀请测试人员。详见 [TestFlight](https://developer.apple.com/cn/testflight/) 官网。

如今，TestFlight 测试已经成了没有上架 App Store 的 App 分发和安装的方案：

| 测试员 | 安装名额 | 使用有效期 | 优点 | 缺点 |
|---|:--|---|---|---|
| 内部 | 25名 | 90天 | 1. 稳定可靠，不需要用户点击配置或信任证书 <br>2. 新版本可用时，自动通知或自动安装更新 | 1. 90天有效时间过短，1万名额度可能还不够 <br>2. 测试人员需要安装 [TestFlight App](https://apps.apple.com/us/app/testflight/id899247664) |
| 外部 | 10000名 | 90天 | 同上 | 同上 |

#### 3.3 Apple Developer Program（苹果开发者计划）和 Apple Developer Free Account（免费个人开发者）

> “一个会员资格，无限的可能性”

2015 年 6 月 8 日 WWDC2015，苹果整合自家的开发者计划：

1. 将 Mac OS X 系统更名为 macOS，并继续提供免费更新，包括 macOS Sierra、macOS High Sierra、macOS Mojave、macOS Catalina、macOS Big Sur 和最新的 macOS Monterey。这些更新版本可以在 Mac App Store 上免费下载和安装。
2. iOS Developer Program 和 Mac Developer Program 合并为 `Apple Developer Program`，不在需要分别付费，只需要付费一次 $99。
3. 推出 `Apple Developer Free Account`（免费个人开发者），普通 Apple ID 账号就可以使用苹果开发和真机测试。

免费个人开发者，需要在 Xcode 7 中导航到 “Xcode -> Preferences —> Accounts”，点击左下方的 “+” 图标添加 Apple ID 登陆，就可以进行真机调试，前提是需要在 [苹果开发者官网](https://developer.apple.com/account/) 注册和同意协议。

但是需要注意，同年推出的 iOS 9，开发者用免费个人开发者进行真机安装测试 App 时，会提示 `“不受信任的开发者”` xxxx：

![2023-iOS-Distribution-App-05](https://ihtcboy.com/images/2023-iOS-Distribution-App-05.png)

需要先信任才能打开，具体在 “设置 -> 通用 -> VPN 与设备管理” 中找到 “开发者 App”，然后找到你需要安装的 App，点击 “信任” 即可。

区别总结：

| 账号类型 | 安装名额 | 使用有效期 | 优点 | 缺点 |
|---|:--|---|---|---|
| Apple Developer Program（苹果开发者计划）| 100 台 | 365天(一年) | 1. 有效时间相对较长 <br>2. 允许安装设备多 | 1. 收费 $99 |
| Apple Developer Free Account（免费个人开发者） | 3 台 | 7天 | 1. 免费 | 1. 有效时间短 <br>2. 安装麻烦  |


#### 3.4 Apple Developer Enterprise Program（苹果开发者企业计划）

同样的，2015 年推出的 iOS 9 对企业证书的 App 也进行了调整：

![2023-iOS-Distribution-App-06](https://ihtcboy.com/images/2023-iOS-Distribution-App-06.png)


在 iOS 8+ 系统时，虽然苹果会提示“不受信任的应用程序开发者”，但是用户点击 “信任” 按钮后，就可以打开 App，非常方便。

而 iOS 9.0 系统后，也是需要在设置里授权，才能打开。

至此，苹果开发者账号的已经完成统一：

1. `Apple Developer`：已同意《Apple 开发者协议》以访问 Apple Developer 网站上特定资源的 Apple ID 持有者。此为免费协议，但开发者无法分发 App。
2. `ADP`：Apple Developer Program 会员资格。此付费计划的会员可以在 App Store 上分发 App。
3. `ADEP`：Apple Developer Enterprise Program 会员资格。此付费计划的会员可以在组织内部向员工分发 App。


关于账号支持的功能和资源，可以参考官网： [支持的功能 (iOS) ](https://developer.apple.com/cn/help/account/reference/supported-capabilities-ios) 。

- Apple Developer Program 是一项基于会员资格的服务，适合于有意创建 App 以在 iPhone、iPad、Mac、Apple Watch 和 Apple TV 版 App Store 上进行分发的组织、个人和独资企业/一人公司。
- Apple Developer Enterprise Program，你能够创建专为你所在组织的员工设计和分发的专属 App。会员资格包括你的整个开发团队对以下内容的使用权限：Beta OS 版本、App 功能，以及开发、测试和分发 App 所需的工具。Apple Developer Enterprise Program 的会员还可以创建 Developer ID 证书来分发 Mac App。


总结苹果开发者账号：

| 账号类型 | 安装名额 | 使用有效期 | 优点 | 缺点 |
|---|:--|---|---|---|
| Apple Developer Free Account（免费个人开发者） | 3 台 | 7天 | 1. 免费 | 1. 有效时间短 <br>2. 安装麻烦 <br>3. 不能上架 App Store  |
| Apple Developer Program（苹果开发者计划）| 100 台 | 365天(一年) | 1. 有效时间相对较长 <br>2. 允许安装设备多 <br>3. 可以上架 App Store | 1. 收费 $99 |
| Apple Developer Enterprise Program（苹果开发者企业计划）| 无限 | 365天(一年) | 1. 有效时间相对较长 <br>2. 允许安装设备无限 | 1. 收费 $299 <br>2. 不能上架 App Store  |


#### 3.5 iOS Developer University Program（iOS 开发者大学计划）

这个大学计划，与最开始的区别是，不能在上架 App Store，其它的区别不大，还是免费的账号。

以下是官网的 [FAQ](https://developer.apple.com/cn/support/university/)：

**是否有适用于学生的 Apple Developer Program？学生是否可享受任何折扣？**

答：我们暂时未提供学生折扣或适用于学生的 Apple Developer Program。iOS Developer University Program 专为计划将 iOS 开发纳入课程大纲的高等教育机构而设计，这些教育机构必须得到国家承认并拥有学位授予权。

**iOS Developer University Program 和 Apple Developer Enterprise Program 有何差别？**

答：iOS Developer University Program 允许大学使用 iOS SDK 和其他 Apple 技术教授 iOS App 开发课程。通过 iOS Developer University Program，同一团队内的学生和教授可以通过电子邮件相互共享开发 App，也可以将其发布到私人网站以进行展示和评分。参与机构必须是符合资格、拥有学位授予权的高等教育机构。

[Apple Developer Enterprise Program](https://developer.apple.com/cn/support/university/) 适用于创建专有内部 iOS App 且仅用于内部部署的公司。组织注册此计划时需要使用 Dun & Bradstreet (D-U-N-S) Number。

**谁应申请加入 iOS Developer University Program？**

答：iOS Developer University Program 的注册请求应该由经授权的代表完成，该代表应该能够在法律上约束高等教育机构遵守计划条款和条件。

**我们是否可以在由学生和教职工（已加入 iOS Developer University Program）共用的大学实验室计算机上安装 iOS SDK？**

答：你可以在大学、大学员工或承包商拥有或控制的 Apple 品牌计算机上安装合理数量的 iOS SDK 副本，前提是此类使用仅限于同意 iOS Developer University Program 学生协议的大学学生以及其身份为大学授权开发者的大学员工或承包商。

**学生应如何参加 iOS Developer University Program？**

答：所有计划参与者必须首先注册为 Apple Developer。然后，学生可接受课程教员的邀请加入团队。在邀请接受过程中，学生需要查看并同意 iOS Developer University Program 学生协议，然后才能成为团队的有效成员。


**是否可将学生列为 iOS Developer University Program 的团队管理员？**

答：不能。学生只可以作为团队成员添加到 iOS Developer University Program。

**Apple 是否会对我的高等教育机构执行身份验证？**

答：是的。作为注册审查过程的一部分，Apple 将审查贵机构的身份信息。注册验证要求和处理时间不尽相同。

**我是某高等教育机构的教授或员工，想要创建 App 并在内部发布给我的机构成员。我应该注册哪个计划？**

答：要开发和生产供高等教育机构内部使用的 iOS App，我们建议你注册 [Apple Developer Enterprise Program](https://developer.apple.com/cn/support/university/)。

**我是否可以同时注册 University Program 和 Enterprise Program？**
答：可以。开发者可同时参加两个计划，但是必须使用唯一的 Apple ID 注册每一个计划。如果需要其他帮助或有任何其他问题，[联系我们](https://developer.apple.com/contact/cn/)。

**iOS Developer University Program 的团队最多可容纳多少人？**

答：你可邀请合理数量的学生加入 iOS Developer University Program 团队。但是，团队每年最多可接受 200 台设备注册。

**如果 App 由 iOS Developer University Program 中的学生开发，谁拥有其知识产权？**

答：如果你希望在参与大学课程或项目的过程中开发 App，你应该就知识产权以及大学是否主张任何此类权利的问题咨询贵校。

**我的高等教育机构确认我拥有知识产权，可以分发我以 iOS Developer University Program 学生参与者的身份开发的 App。怎样才能在 App Store 上分发我的 App？**

答：你必须注册 [Apple Developer Program](https://developer.apple.com/cn/support/university/) 才能在 App Store 上分发 App。

**是否有适用于学生的 Apple Developer Program？学生是否可享受任何折扣？**

答：虽然没有专门针对学生的开发者计划，但每个人学习为 Apple 平台开发 App 都是免费的。只需一个 Apple ID，您就可以访问 Xcode、软件下载、文稿、示例代码、论坛和“反馈助理”，并可在设备上测试您的 App。此外，如果您报名了某教育机构提供的 iOS 开发课程，而该机构注册了 iOS Developer University Program，那么您可以访问适用于这些课程的会员资源并享受相应的会员权益。当你需要分发 App 时，则可以加入 Apple Developer Program。


**总结：**

- 免费
- 可以最多 200 名学生（设备）
- 可以使用 TestFlight 分发


申请入口 [iOS Developer University Program](https://developer.apple.com/programs/ios/university/)，了解更多 [官网页面](https://developer.apple.com/cn/support/university/)。


#### 3.6 非营利组织、教育机构和政府机构

一年 $99 的 Apple Developer Program 会员资格费用可以申请豁免：

- 位于符合资格地区的非营利组织、取得认可的教育机构和政府机构，如计划仅在 App Store 上发布免费 App，则可申请豁免其 Apple Developer Program 会员资格年费。Apple 将审核你的请求，并会联系你以告知请求是否获批。
- 符合资格的地区：澳大利亚、巴西、加拿大、中国大陆、法国、德国、以色列、意大利、日本、墨西哥、韩国、英国以及美国。


Apple 会审核所有会费豁免请求。在会费豁免请求获批后，如果你在 App Store 上分发付费 App 或含有 App 内购买项目的 App，则你需要支付 99 美元的年度会费 (如果适用，则以当地货币计费)。

**会费豁免不适用于：**

- 在 App Store 上分发付费 App 或所分发的 App 中含有 App 内购买项目的组织。
- Apple Developer Enterprise Program 会员。
- 个人和独资企业/一人公司。

更多详细信息，[Apple Developer Program 会员资格费用豁免](https://developer.apple.com/cn/support/membership-fee-waiver/)。


### 四、登峰造极

综上，苹果开发者账号：

| 账号类型 | 安装名额 | 使用有效期 | 优点 | 缺点 |
|---|:--|---|---|---|
| Apple Developer Free Account（免费个人开发者） | 3 台 | 7天 | 1. 免费 | 1. 有效时间短 <br>2. 安装麻烦 <br>3. 不能上架 App Store  |
| Apple Developer Program（苹果开发者计划）| 100 台 | 365天(一年) | 1. 有效时间相对较长 <br>2. 允许安装设备多 <br>3. 可以上架 App Store | 1. 收费 $99 |
| Apple Developer Enterprise Program（苹果开发者企业计划）| 无限 | 365天(一年) | 1. 有效时间相对较长 <br>2. 允许安装设备无限 | 1. 收费 $299 <br>2. 不能上架 App Store  |
| iOS Developer University Program（iOS 开发者大学计划）| 200名(台) | 365天(一年) | 1. 有效时间相对较长 <br>2. 免费 | 1. 不能上架 App Store <br>2. 申请难  |

因为苹果 App Store 需要审核，并且审核的过程缓慢，当年一个新 App 可能经过一周才有审核结果，如果被拒一个月后才能正式上架，对于当年移动互联网时期的企业来说，分秒必争，可能等不了这么久，所以就出现了很多的新模式！

#### 4.1 新模式 vs 对抗

通过上面的表格，可以看出来，如果不上架 App Store 的情况下，希望分发安装 App ，可以有以下的方法：

- 企业签名：允许企业和开发者将自己的应用程序签名并在企业内部分发和使用，而无需将其发布到 App Store 上。
- 超级签名：利用苹果提供的 Ad-Hoc 分发方案，个人开发者账号的 100 个苹果设备测试额度，远程读取用户的 UDID，远程重签打包后，分发用户安装。
- TestFlight 签名：苹果 Beta 测试分发平台。
- MDM 超级签名：基于 iOS 的 Mobile Device Management（移动设备管理系统），把苹果手机等设备标记为企业内部设备，从而使手机获得安装企业内部某 App 的资格。

**开发者模式**

从 iOS 16 开始，个人开发者帐号真机安装的测试 App 不能直接启动，会提示：“需要启动开发者模式”，此时需要开启 **开发者模式** 这个选项。开发者模式在 “设置 - 隐私与安全性”，划到最底下的安全性，可以看到 `开发者模式`。开启开发者模式之后会重启手机，重启之后点击确认开启即可。

![2023-iOS-Distribution-App-07](https://ihtcboy.com/images/2023-iOS-Distribution-App-07.png)


iOS 16 中引入的开发者模式，苹果表示用于保护用户在设备上无意中安装有害软件的问题，并减少仅由开发者功能暴露的攻击载体。

此举，可以让大部分普通用户不会去开启此功能，对于使用签名分发包体的方式，一方面教育用户启动开发者模式成本很高，另一方面苹果对于选择“开启”时，做了多重警告提示用户，包括重启设备、重启后二次确认。

**企业账号**

企业证书，目前苹果已经不在审批新的企业证书，石沉大海，并且账号重新审查越来越严，能续费的企业帐号越来越少，所以未来只会越来越少，直到消失。

那么，企业帐号本意是给企业内部分发 App 使用，那么如果企业帐号不能申请了？有什么代替方案？

答案是，自定 App 和非公开 App 方案，下文会介绍。

**设备注册限制**

从今年某个时间开始，苹果更新了 [设备注册规则](https://developer.apple.com/cn/help/account/reference/device-registration-updates)：

1. 新注册的开发者账号，只能添加 10 个设备，11 ~ 100个，需要等 24 小时 ~ 72 小时。
2. 会员计划到期后一个月或更长时间才续订的会员资格，适用上述规则。
3. 如果预置设备标识符之前与因违反 《Apple Developer Program 许可协议》而被终止的会员资格相关联，则设备可能会被移到不符合资格状态，最长可达 30 天。

![2023-iOS-Distribution-App-08](https://ihtcboy.com/images/2023-iOS-Distribution-App-08.png)

这个影响很明显，比如，后续新创建了一个苹果账号，那这个苹果账号添加设备的话，超过 10 个会一直要等 24 小时到 48 小时，不会实时添加了？那还分发个啥？

另外，如果过期账号，重新续费，也是这个逻辑，所以大家千万不要断供！

> 如果账号被苹果封号，关联的设备，在 30 天内，无法添加到其它开发者账号证书下。

从侧面验证，苹果对开发者账号、设备之间的联系性，实锤苹果是有检查！

所以这个规则，那些还在有效期内的帐号很值钱。但是一旦停止续费，那这个账号就废了！

通过这套组合拳（开发者模式 + 设备注册限制），已经破了个人开发者帐号分发的方案，因为688人民币一个帐号只能给 10 个设备安装 App，一个设备成本就是 68.8 元！

至此，通过宣传安全性的价值远大于启动开发者，启动开发者模式带来的不便，用户也不愿意开启。


#### 4.2 非公开 App 分发（Unlisted App）

> [非公开 App 分发](https://developer.apple.com/cn/support/unlisted-app-distribution/)：将不适合公开分发的 App 以非公开方式在 App Store 上发布，使其仅可通过直接链接被发现。非公开 App 不会出现在任何 App Store 类别、推荐、排行榜、搜索结果或其他列表中，但可以通过 Apple 商务管理和 Apple 校园教务管理进行访问。合作伙伴销售工具、员工资源或调查研究方面的 App 非常适合进行非公开分发。

将你的 App 分发至：
* 限定范围内的受众：通过一个标准链接，即可在 App Store 上以及 Apple 校园教务管理或 Apple 商务管理中分发给限定范围内的受众 (例如兼职员工、加盟商、合作伙伴、附属公司、高校学生或会议参与者)。
* 由员工拥有的设备：该设备需不符合通过 Apple 校园教务管理或 Apple 商务管理来进行管理的资格。
* 受管理的和未受管理的设备。
* App Store 支持的所有地区。

在你请求非公开 App 分发之前，你的 App 必须已在 App Store 中上架或已准备好进行最终分发且已提交至 App Review 团队。在提交内容的“审核注释”部分中添加注释，指明你的 App 将用于非公开分发。然后，[提交非公开 App 分发请求。](https://developer.apple.com/contact/request/unlisted-app/)。

**总结：**
- App 需要苹果审核；
- App 不上架到 App Store，所以 App Store 搜索不到；
- App 下载链接是一条固定链接，知道链接的人就可以在 App Store 下载；


#### 4.3 自定 App 分发（Custom App）

> [自定 App](https://developer.apple.com/cn/custom-apps/)：与商务和教育机构客户接洽，根据他们所在组织的独特需求，为其设计和构建自定 App。通过 Apple 商务管理和 Apple 校园教务管理，你不但能以安全私密的方式向特定的合作伙伴、客户和特许经营者进行分发，而且还能向内部员工分发专属 App。

自定 App 是指你为特定组织打造的 App，包括组织内部使用的专属 App。你可以指定一个或多个组织，让其能够在 Apple 商务管理或 Apple 校园教务管理上看到和下载你的 App。然后，他们可以通过移动设备管理或兑换码来进行分发。

这里有 3 个概念：

- [Apple 商务管理](https://support.apple.com/zh-cn/guide/apple-business-manager/welcome/web)：一个基于 Web 的简单门户，IT 管理员可以将它与第三方移动设备管理 (MDM) 解决方案搭配使用；这样，无论你的组织使用 iPhone、iPad 还是 Mac，你都可以轻松地批量购买内容。
- [Apple 校园教务管理](https://support.apple.com/zh-cn/guide/apple-school-manager/welcome/web)：一个基于 Web 的简单门户，IT 管理员可以将它与第三方移动设备管理 (MDM) 解决方案搭配使用；这样，无论你的组织使用 iPhone、iPad 还是 Mac，你都可以轻松地批量购买内容。
- 移动设备管理 (MDM，Mobile Device Management)：用于企业、教育机构等组织进行对移动设备的管理和控制。通过 MDM，管理员可以更便捷地进行设备配置、应用程序分发和数据保护等管理操作，提高工作效率和信息安全。

自定 App 分发可以理解为就是替代“企业账号”的职能，唯一最大区别就是 App 要苹果审核！

**总结：**
- 面向教育机构和企业的分发方式，所以需要机构或企业才能申请，免费申请；
- App 需要苹果审核（通过苹果开发者账号送审，需要 $99 会员账号）；
- App 不上架到 App Store，所以 App Store 搜索不到；
- App 是私有，只能授权给 Apple 商务管理或 Apple 校园教务管理账号使用；
- Apple 商务管理或 Apple 校园教务管理账号免费或付费购买的 App，可以通过兑换码或 MDM 来分发。

> 注：Apple 商务管理或 Apple 校园教务管理，只在部分国家或地区可用，详见官网 [可用情况](https://support.apple.com/zh-cn/102867)。

### 五、总结

#### 5.1 iOS 分发方式总结

所以，目前苹果分发和安装 App 的方案：

| 分发方式 | 费用 | 安装名额 | 有效时间 | 是否需要苹果审核 | 备注 |
|:-:|:--|:--|:--|---|---|
| App Store | $99 | 无限 | 无限 | 是 |  |
| In-house（内部) | $299 | 无限 | 一年 | 否 |  |
| Ad Hoc（临时） | $99 | 100＊ | 一年 | 否 | 依赖 Apple Developer Program 账号，所以需要 $99 费用。 |
| 免费个人开发者 | 免费 | 3 | 7天 | 否 |  |
| TestFlight | $99 | 10000 | 90天 | 是 | 依赖 Apple Developer Program 账号，所以需要 $99 费用。 |
| 非公开 App 分发 | $99 | 无限 | 无限 | 是 | 依赖 Apple Developer Program 账号，所以需要 $99 费用。 |
| 自定 App 分发 | $99 | 无限 | 无限 | 是 | 依赖 Apple Developer Program 账号，所以需要 $99 费用。 |

***Ad Hoc 安装名额：**
有限数量的用户可以直接在 Apple 设备上安装 Ad Hoc 分发的 App，以进行测试和内部分发：

* iPhone (每一会员资格年度为 100 台)
* iPad（每一会员资格年度为 100 台）
* iPod touch（每一会员资格年度为 100 台）
* Apple Watch (每一会员资格年度为 100 台)
* Apple TV (每一会员资格年度为 100 台)

综上，目前苹果无限安装的分发方式，除了仅存的小部分企业账号，新方式都是需要苹果审核，而旧的测试分发 Ad Hoc 因为设备注册的限制，成本过高而被淘汰，可以看出，苹果对分发安装 App 的管制是越来越严，那么 **苹果会愿意开放侧载？**

#### 5.2 iOS Sideload App（侧载）

欧盟《数字市场法》（DMA，[The Digital Markets Act](https://digital-markets-act.ec.europa.eu/index_en)）是为了规范大型互联网平台公司的运营：

- 看门人（Gatekeepers）：在欧洲经济区（EEA）年均营业额为75亿欧元，或市值超过750亿欧元，以及至少在三个欧盟国家提供核心平台服务，每月至少服务4500万终端用户，或是超过1万名商业用户。
- 规范性要求（义务）：不得滥用市场支配地位打压或并购竞争对手、不得未经用户允许强行推送广告或安装软件，不得将采集的用户数据移作他用等。

> 显而易见，这就是欧盟为亚马逊、微软、苹果、Meta、Netflix、TikTok等，海外科技巨头量身定制的标准。对于其他科技企业而言，欧盟的《数字市场法》或许只能算“皮肉伤”，但对于苹果而言可能就会是伤筋动骨的切肤之痛了，其或将改变苹果整个软件生态的运行模式，进一步来说，几乎就相当于是要改变苹果软硬件结合的商业逻辑。
> 
> 众所周知，苹果是这个星球在软硬件结合上做得最为出色的科技企业，左手是苹果旗下硬件设备出众的产品力，右手则是iOS、macOS、iPadOS所提供的安全、稳定、便捷的用户体验。但《数字市场法》则极有可能会打破这个二元结构，使得苹果旗下操作系统的封闭性难以为继。
>  
> 根据《数字市场法案》中的要求，苹果方面将需要允许用户在iOS上安装第三方应用和应用商店，并允许第三方与其服务互操作，开发者还有权要求绕过苹果的支付系统。
>  
> 引用来源：[文章](https://mp.weixin.qq.com/s/PyG6DEWAG_b8bGaKag-cPQ)


综上，苹果一方面收缩了 iOS 分发 App 的广泛能力，另一方面在欧盟《数字市场法》压力下，苹果怎么选择？

**不合规的后果是什么？**

- 罚款：最高为公司全球年营业额总额的 10%，如果屡次侵权，最高可达 20%
- 定期罚款：高达平均日营业额的 5%

所以，我们看看苹果在 2023 年 11 月 2 日 [公布的第四季度业绩](https://www.apple.com.cn/newsroom/2023/11/apple-reports-fourth-quarter-results/) ：

![2023-iOS-Distribution-App-09](https://ihtcboy.com/images/2023-iOS-Distribution-App-09.png)

欧洲占比 24.6%，远远超过全球年营业额总额的 10%，如果你是苹果，你会怎么做？

根据欧盟《数字市场法》官网的日程表：
![2023-iOS-Distribution-App-10](https://ihtcboy.com/images/2023-iOS-Distribution-App-10.png)

2024 年 3 月，就会有一个结论，到时候就知道啦~ 大家也可以在评论区说说自己的看法~

---

最后，如果觉得文章不错，掘金 2023 年度人气创作者打榜中，每天可投 2 票(截止 12 月 19 号)：[欢迎给我们投票～ ](https://activity.juejin.cn/rank/2023/writer/1002387318511214)

欢迎大家评论区一起讨论交流~

> 我们是37手游移动客户端开发团队，致力于为游戏行业提供高质量的SDK开发服务。
> 欢迎关注我们，了解更多移动开发和游戏 SDK 技术动态~
> 技术问题/交流/进群等可以加官方微信 MobileTeam37


### 参考引用

- [关于 App Store 苹果商店价格的那些事（历上最全版）](https://juejin.cn/post/7205562168358895671)
- [TestFlight on the App Store](https://apps.apple.com/us/app/testflight/id899247664)
- [TestFlight - Wikipedia](https://en.wikipedia.org/wiki/TestFlight)
- [TestFlight - Apple Developer](https://developer.apple.com/cn/testflight/)
- [Notes from WWDC 2015: Restructuring the Apple Developer Program | | InformIT](https://www.informit.com/articles/article.aspx?p=2419717)
- [在 iOS 上安装自定企业级应用 - 官方 Apple 支持](https://support.apple.com/zh-cn/HT204460)
- [支持的功能 (iOS)  - Apple Developer](https://developer.apple.com/cn/help/account/reference/supported-capabilities-ios)
- [iPhone打开应用显示未受信任企业级开发者无法打开 - 博客园](https://www.cnblogs.com/qq9070/p/5514454.html)
- [iOS Developer University Program - 支持 - Apple Developer](https://developer.apple.com/cn/support/university/)
- [iOS Developer University Program - Apple Developer](https://developer.apple.com/programs/ios/university/)
- [Apple Developer Program 会员资格费用豁免 - 支持 - Apple Developer](https://developer.apple.com/cn/support/membership-fee-waiver/)
- [设备注册更新 - 账户 - Apple Developer](https://developer.apple.com/cn/help/account/reference/device-registration-updates)
- [自定 App - Apple Developer](https://developer.apple.com/cn/custom-apps/)
- [非公开 App 分发 - 支持 - Apple Developer](https://developer.apple.com/cn/support/unlisted-app-distribution/)
- [Unlisted App Request - Apple Developer](https://developer.apple.com/contact/request/unlisted-app/)
- [Apple 商务管理使用手册 - 官方 Apple 支持 (中国)](https://support.apple.com/zh-cn/guide/apple-business-manager/welcome/web)
- [Apple 校园教务管理使用手册 - 官方 Apple 支持 (中国)](https://support.apple.com/zh-cn/guide/apple-school-manager/welcome/web)
- [面向教育机构和企业的 Apple 计划和付款方式的可用情况 - 官方 Apple 支持 (中国)](https://support.apple.com/zh-cn/102867)
- [The Digital Markets Act - European Commission](https://digital-markets-act.ec.europa.eu/index_en)
- [About DMA - European Commission](https://digital-markets-act.ec.europa.eu/about-dma_en)
- [《数字市场法案》生效，苹果的至暗时刻或将到来](https://mp.weixin.qq.com/s/PyG6DEWAG_b8bGaKag-cPQ)
- [Apple 公布第四季度业绩 - 2023 年 11 月 2 日](https://www.apple.com.cn/newsroom/2023/11/apple-reports-fourth-quarter-results/)

> 注：如若转载，请注明来源。