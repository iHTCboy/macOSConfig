title: è£…é€¼ç¥å¥â€”â€”â€”æœ‰é“è¯å…¸å‘½ä»¤è¡ŒæŸ¥è¯¢å·¥å…·
date: 2018-01-29 08:49:16
categories: technology #life poetry
tags: [å‘½ä»¤è¡ŒæŸ¥å•è¯,æœ‰é“è¯å…¸]  # <!--more-->
reward: true

---

### 1ã€è£…é€¼è¯´æ˜
ä¸å–œæ¬¢å®‰è£…æœ‰é“è¯å…¸çš„åº”ç”¨ç¨‹åºï¼Œå› ä¸ºå¤ªè€—èµ„æºè¿˜ä¸€å †å¹¿å‘Šï¼Œä½†æ˜¯ç”¨æµè§ˆå™¨æ‰“å¼€`dict.youdao.com`ä¹ŸæŒºéº»çƒ¦çš„ï¼Œä¸æ˜¯å—ï¼Ÿå¿«æ¥è¯•è¯•æœ‰é“è¯å…¸å‘½ä»¤è¡Œå·¥å…·å§ï¼

### 2ã€çœ‹å›¾è£…é€¼
![example](https://github.com/iHTCboy/iGallery/raw/master/BlogImages/2018/01/2018-01-29-yddict-example.gif)

<!--more-->

### 3ã€è‡ªå·²è£…é€¼

#### 3.1 å®‰è£…

```
    npm install yddict -g
```

#### 3.2 ä½¿ç”¨è¯´æ˜

```
    yd <è¦æŸ¥è¯¢çš„å•è¯>
```

åœ¨`/usr/local/lib/node_modules/yddict/`ç›®å½•ä¸‹ï¼Œå¯ä»¥è¿›è¡Œä¸€äº›è‡ªå®šä¹‰ï¼Œæˆ–è€…æ›´æ”¹æŸ¥è¯¢çš„æ¥æºï¼Œ
ä¸»è¦æºç  index.jsï¼š

```
#!/usr/bin/env node
const request = require('request');
const cheerio = require('cheerio');
const chalk = require('chalk');
const fs = require('fs');
const Spinner = require('cli-spinner').Spinner;
const isChinese = require('is-chinese')
const urlencode = require('urlencode');
const spinner = new Spinner('åŠªåŠ›æŸ¥è¯¢ä¸­... %s');
const home = process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];
const configFile = home + "/config.json";
let color = 'gray';//æ›´æ”¹æŸ¥è¯¢ç»“æœçš„æ–‡å­—é¢œè‰²

spinner.setSpinnerString('|/-\\');
spinner.start();

const readFile = (filename, encoding) => {

    try {
        return fs.readFileSync(filename).toString(encoding);
    }
    catch (e) {
        return null;
    }
};

const config = JSON.parse(readFile(configFile,"utf8"));

const input = process.argv.slice(2)
const word = input.join(' ')
const isCn = isChinese(word);
const URL = isCn ? `http://dict.youdao.com/w/eng/${urlencode(word)}`:`http://dict.youdao.com/w/${urlencode(word)}`

const options = {
  'url':URL
};

if(config){
  if(config.proxy){
    options.proxy = config.proxy;
  }
  if(config.color){
    color = config.color;
  }
}

const color_output = chalk.keyword(color);
request(options,(error, response, body)=>{
  const $ = cheerio.load(body, {
    ignoreWhitespace: true,
    xmlMode: true
  });
  let result = '';

  spinner.stop(true);
  if(isCn){
    $('div.trans-container > ul').find('p.wordGroup').each(function(i,elm){
      result = $(this).text().replace(/\s+/g," ");
    });
  }else{
    result = $('div#phrsListTab > div.trans-container > ul').text();
  }
  // phrase
  if (result === '') {
    result = $('div#webPhrase > p.wordGroup').text();
  }
  // sentence
  if (result === '') {
    result = $('div#fanyiToggle > div.trans-container > p:nth-child(2)').text();
  }
  console.log(color_output(result));

});


```





### 4ã€è£…é€¼æŒ‡å¯¼
- [kenshinji/yddict: ä¸€ä¸ªå‘½ä»¤è¡ŒæŸ¥å•è¯çš„å·¥å…·ğŸ’» ğŸ“š](https://github.com/kenshinji/yddict)
- [npm-æœ‰é“è¯å…¸å‘½ä»¤è¡ŒæŸ¥è¯¢å·¥å…·](https://www.npmjs.com/package/yddict)



<br>
> æ³¨ï¼šæœ¬æ–‡é¦–å‘äº [iHTCboy's blog](http://iHTCboy.com)ï¼Œå¦‚è‹¥è½¬è½½ï¼Œè¯·æ³¨æ¥æº


